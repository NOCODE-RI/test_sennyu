# データベース設計書

## プロジェクト情報
- **プロジェクト名**: [プロジェクト名を入力]
- **作成日**: [YYYY-MM-DD]
- **作成者**: [作成者名]
- **最終更新日**: [YYYY-MM-DD]
- **承認者**: [承認者名]

## データベース概要
- **DB名**: [データベース名]
- **用途**: [このDBの目的・用途]
- **対象システム**: [どのシステムで使用するか]
- **想定データ量**: [想定されるデータ量]

## テーブル定義

### 1. [テーブル名1]
| 項目名 | データ型 | サイズ | NULL | デフォルト値 | 説明 |
|--------|----------|--------|------|--------------|------|
| id | Text | 255 | No | - | 主キー（UUID） |
| name | Text | 255 | No | - | 名前 |
| email | Text | 255 | No | - | メールアドレス |
| created_at | Date | - | No | Now() | 作成日時 |
| updated_at | Date | - | No | Now() | 更新日時 |

**説明**: [このテーブルの目的・役割]

**制約事項**:
- [制約事項1]
- [制約事項2]

**インデックス**:
- [インデックス1]
- [インデックス2]

### 2. [テーブル名2]
| 項目名 | データ型 | サイズ | NULL | デフォルト値 | 説明 |
|--------|----------|--------|------|--------------|------|
| id | Text | 255 | No | - | 主キー（UUID） |
| user_id | Text | 255 | No | - | ユーザーID（外部キー） |
| title | Text | 255 | No | - | タイトル |
| content | Text | - | Yes | - | 内容 |
| status | Text | 50 | No | 'draft' | ステータス |
| created_at | Date | - | No | Now() | 作成日時 |
| updated_at | Date | - | No | Now() | 更新日時 |

**説明**: [このテーブルの目的・役割]

**制約事項**:
- [制約事項1]
- [制約事項2]

**インデックス**:
- [インデックス1]
- [インデックス2]

## テーブル間関係

### 関係図
```
[テーブル名1] 1 ←→ N [テーブル名2]
[テーブル名2] N ←→ 1 [テーブル名3]
[テーブル名1] 1 ←→ 1 [テーブル名4]
```

### 関係詳細

#### 1対多の関係
- **[テーブル名1] → [テーブル名2]**
  - 関連項目: [テーブル名1].id → [テーブル名2].user_id
  - 説明: [関係の説明]
  - 制約: [制約の詳細]

#### 多対1の関係
- **[テーブル名2] → [テーブル名3]**
  - 関連項目: [テーブル名2].category_id → [テーブル名3].id
  - 説明: [関係の説明]
  - 制約: [制約の詳細]

#### 1対1の関係
- **[テーブル名1] → [テーブル名4]**
  - 関連項目: [テーブル名1].id → [テーブル名4].user_id
  - 説明: [関係の説明]
  - 制約: [制約の詳細]

## インデックス設計

### 主要インデックス
| インデックス名 | テーブル名 | 対象項目 | 種類 | 説明 |
|----------------|------------|----------|------|------|
| idx_user_email | [テーブル名1] | email | UNIQUE | メールアドレスの重複チェック |
| idx_user_status | [テーブル名2] | status | NORMAL | ステータスによる検索高速化 |
| idx_created_at | [テーブル名2] | created_at | NORMAL | 作成日時による検索高速化 |

### 複合インデックス
| インデックス名 | テーブル名 | 対象項目 | 説明 |
|----------------|------------|----------|------|
| idx_user_status_date | [テーブル名2] | user_id, status, created_at | ユーザー・ステータス・日時の複合検索 |

## データ型・制約

### 使用するデータ型
- **Text**: 文字列データ（255文字以内）
- **Number**: 数値データ
- **Date**: 日時データ
- **Boolean**: 真偽値データ
- **List**: リスト型データ（Bubble.io特有）

### 制約ルール
- **主キー**: すべてのテーブルにUUID形式のidを設定
- **外部キー**: 関連するテーブル間の整合性を保つ
- **NOT NULL**: 必須項目にはNULLを許可しない
- **デフォルト値**: 適切なデフォルト値を設定

## パフォーマンス考慮事項

### クエリ最適化
- [最適化ポイント1]
- [最適化ポイント2]
- [最適化ポイント3]

### データ量対策
- [大量データ対策1]
- [大量データ対策2]
- [大量データ対策3]

## セキュリティ考慮事項

### アクセス制御
- [アクセス制御1]
- [アクセス制御2]
- [アクセス制御3]

### データ保護
- [データ保護1]
- [データ保護2]
- [データ保護3]

## バックアップ・復旧

### バックアップ方針
- [バックアップ方針1]
- [バックアップ方針2]
- [バックアップ方針3]

### 復旧手順
- [復旧手順1]
- [復旧手順2]
- [復旧手順3]

## 備考・その他
- [追加の説明・メモ]
- [技術的な詳細]
- [実装時の注意点]

---
**更新履歴**
- [YYYY-MM-DD] 初版作成
- [YYYY-MM-DD] [更新内容]
